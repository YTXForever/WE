# 数据库基础知识（一）

参考资料：https://blog.csdn.net/lemon89/article/details/50193891

## 1.硬件基础知识

### 1.1扇区

盘片被分为许多扇形的区域，每个区域叫一个扇区，硬盘中每个扇区的大小固定为512字节

### 1.2磁道

盘片表面上以盘片中心为圆心，不同半径的同心圆环称为磁道

### 1.3寻址时间

IO时间=寻道时间+旋转延时+数据传输时间

寻道时间：磁头移动到正确磁道的时间

旋转延时：盘片旋转，将正确数据的扇区移动到读写磁盘下方的时间

数据传输时间：

### 1.4页page

主存磁盘存储会均分成很多块，很多操作系统中，一块大小在4K。主存与磁盘数据交互以页为单位。当程序在内存中读取不到数据时，会触发缺页异常。磁盘会找到起始位置，将一页或几页的数据写入内存中。

## 2.数据库相关知识

### 2.1B+树索引

B+树的叶子节点为链表，保存全部数据信息。非叶子节点仅有导航作用。B+树每一个节点，对应1页数据，树的高度决定了IO的次数。

#### 2.1.1聚集索引

B+树，非叶子节点存储<键值,地址>，地址是指向下一层的地址

叶子节点存储全部数据，双向链表(大小排序)



#### 2.1.2非聚集索引

叶子节点保存<键值,地址>，保存记录的地址(记录的物理地址，记录的主键值)

#### 2.1.3联合索引

最左前缀原则

#### 2.1.4唯一索引



### 2.2mysql搜索引擎

SHOW ENGINES查询搜索引擎

SHOW VARIABLES LIKE 'default_storage_engine'查看当前使用的存储引擎

#### 2.2.1MYISAM

myisam不支持事务

myisam的表会生成三个文件：table_name.frm(表结构文件),table_name.myd(表数据) ,table_name.myi(表索引)

使用场景：——myisam搜索引擎在搜索大量数据时存在优势(查询优势)

​                   ——myisam插入性能高(大量插入性能优异)

锁：表锁。select、update、delete、insert均会加表锁

索引:非聚集索引(全文索引full text index),允许表没有主键和索引

存储空间：所需空间小，可压缩空间。支持三种数据格式：静态表、动态表、压缩表

不支持外键

每个表都有一个自增列

#### 2.2.2innoDB（mysql 5.5以后默认引擎）

支持事务、外键。

innoDB的数据、索引存放在一起。table_name.frm(表结构),table_name.ibd(表数据、索引)

锁：行锁(并发优异)

索引：聚集索引，如果表中没有创建主键，mysql会默认生成一个6字节rowid作为主键

存储空间：会在主存中缓冲数据和索引

支持自适应哈希索引，但并不能人为创建，由存储引擎根据使用情况，自动生成

#### 2.2.3memory

不支持事务

hash索引

内存级存储引擎，将数据存储至内存。每个表最多可以有32个索引，每个索引列最多16列

mysql重启，数据会丢失

#### 2.2.4ARCHIVE

| **功  能** | **MYISAM** | **Memory** | **InnoDB** | **Archive** |
| -------- | ---------- | ---------- | ---------- | ----------- |
| 存储限制     | 256TB      | RAM        | 64TB       | None        |
| 支持事物     | No         | No         | Yes        | No          |
| 支持全文索引   | Yes        | No         | No         | No          |
| 支持数索引    | Yes        | Yes        | Yes        | No          |
| 支持哈希索引   | No         | Yes        | No         | No          |
| 支持数据缓存   | No         | N/A        | Yes        | No          |
| 支持外键     | No         | No         | Yes        | No          |

### 2.3事务隔离级别

#### 2.3.1read uncommited

#### 2.3.2read commited

#### 2.3.3reapeatable read重复读

#### 2.3.4serializable

## 2.4锁

