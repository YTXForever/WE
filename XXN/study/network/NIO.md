# NIO

## 1.NIO优点

a)客户发起的连接操作是异步的，可以通过多路复用器Selector注册OP_CONNECT,OP_READ,OP_WRITE,OP_ACCEPT等事件。BIO是阻塞拿到以上后续结果

b)SocketChannel读写可以异步，如果没有可读写的数据，会直接返回。这样IO通信线程可以处理其他链路，无需同步等待该链路可用

c)一个selector线程可以处理更多的客户端链接

## 2.粘包拆包

### 2.1概念

粘包:服务器一次收到了两个数据包

拆包:一个数据包经过多次拆分，送达至服务器

### 2.2原因

- write的内容大于缓存区大小
- MSS大小的TCP分段。MSS选项用于在TCP连接建立时，收发双方协商通信时每一个报文段所能承载的最大数据长度。只能在初始化连接请求（SYN=1）的报文段中使用
- 以太网帧的payload大于MTU进行IP分片。MTU:网络上允许传送的最大数据包大小

