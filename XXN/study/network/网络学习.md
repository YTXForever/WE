# 网络学习

## 1.OSI七层网络结构

| 七层网络结构 |                                          |      |
| ------ | ---------------------------------------- | ---- |
| 应用层    | 为用户提供服务，常见http,https,ftp,pop3,smtp       |      |
| 表示层    | 用于表示层数据编码转换功能，确保能被另一个系统的应用层识别            |      |
| 会话层    | 负责建立、管理、终止表示层实体之间的通话。该层的通信由不同设备中的应用程序的服务请求响应组成。 |      |
| 传输层    | 建立主机端到端的链接，为上层协议提供可靠的端到端的可靠透明的数据传输服务，(可将过大的数据包分割)。TCP/UDP |      |
| 网络层    | 通过IP寻址建立两个节点间链接，为源端的传输层，选择路由和交换节点。IP层(路由器) |      |
| 数据链路层  | 格式化数据，定义了如何传输及控制对物理介质的访问，提供错误监测及纠正，确保可靠性。（交换机）将比特组成字节，由字节转换为帧，使用链路层地址(以太网MAC地址)。数据链路层分为两个子层：逻辑链路控制子层(LLC),媒体访问控制子层(MAC) |      |
| 物理层    | 传输比特流，电流强弱0/1传输(模数转换)，定义了传输介质的类型。介质:解调器、网线、双绞线。 |      |

发送方：从上至下处理头部

接收方:从下至上处理头部

## 2.TCP/IP  5层网络结构

![img](https://images2015.cnblogs.com/blog/705728/201604/705728-20160424234825491-384470376.png)

## 3.TCP三次握手

### 3.1TCP协议

面对链接、可靠、基于字节流的传输层通讯协议。将应用层的数据流分割成报文段，发送给接收方tcp层(数据包大小依据目标计算机最大传输单元mpu决定)

TCP将数据包给IP层，数据包上有序号保证顺序(防止不丢包)。对方收到，则发送ack确认，否则重传。tcp用一个奇偶核函数校验传输过程中数据包是否有误

### 3.2TCP报文结构



![img](https://images2015.cnblogs.com/blog/964016/201608/964016-20160829215953168-1927861560.png)



4个字节序号：标识报文的顺序； 如果一个报文序号107，报文大小100，则下一个报文序号是207

4个字节确认方ACK：代表着目标服务器期望收到的下一个报文序号(如果B接受到A的报文序号是301，报文长度是200，那么B在接受搭配报文序号就是500=301+200-1；那么A再接收到B的确认号以后，会将序列号置为501)

URG:紧急指针，1有效 0可忽略

**ACK**:确认序号标识  1有效 0:报文不含ack信息

PSH:push标志  1push标识，目标服务器接受到该数据包，尽快交给应用程序，不要在缓冲区排队

RST:重置链接标志。由于主机崩溃等导致非法链接、非法报文段，非法请求

**SYN**:同步序号，标志建立链接。SYN=1，ACK=0没有使用捎带的确认域。 SYN=1，ACK=1使用捎带的确认域

**FIN**：释放链接标志。1：发送方没有待发送的数据流，可关闭链接

2个字节window窗口大小:告知发送端接收端缓存大小，控制发送端发送速率，流控

16奇偶