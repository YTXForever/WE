# 网络
## TCP/IP

1. 链路层（包括OSI中的物理层和数据链路层）
2. 网络层
3. 传输层
4. 应用层（包括OSI中的会话层、表示层、应用层）

## 传输控制协议TCP

1. 面向连接的、可靠的、基于字节流的传输层通信协议
2. 将应用层的数据流分割成报文段->ip层->目标节点的tcp层
3. TCP为了保证不丢失包，给数据包序号，序号也保证了目标节点的按序处理对方收到则发送ACK确认，未收到则重传。
4. 使用奇偶校验和函数来校验数据在传输过程中是否有错误，发送和接收时都校验。

## TCP的三次握手

1. 第一次：A发送SYN=1,seq=x,A的状态为SYN_SENT；
2. 第二次：B收到1的消息后，回复SYN=1，ACK=1，seq=y，ack=x+1，B的状态置为SYN_RCVD；
3. 第三次：A收到2消息后，回复ACK=1，seq=x+1，ack=y+1，A的状态置为ESTAB-LISHED；
4. B收到3消息，将B状态置为ESTAB-LISHED。

*注：* **三次握手是为了初始化x和y**

## TCP的四次挥手

1. 第一次：A发送FIN=1，seq=u，A状态置为FIN_WAIT_1（u是最后一次数据传输，最后一个字节序号）；
2. 第二次：B接收1消息，回复ACK=1，ack=u+1，seq=v，B状态置为CLOSE_WAIT；
3. A收到2消息，将B状态置为FIN_WAIT_2；
4. 这期间，B还可以继续向A传输数据；
5. 第三次：B发送FIN=1，ACK=1，seq=w（因4步骤有数据传输，消耗序列号），ack=u+1，B状态置为LAST_ACK；
6. 第四次：A收到5，回复ACK=1，seq=u+1，ack=w+1，将A置为TIME_WAIT；
7. B收到6消息，将B状态置为CLOSED；
8. A在6步骤基础上等待2MSL后，将状态置为CLOSED。

*注：* **四次挥手AB各需要一次FIN和一次ACK**

## TCP的滑动窗口（流量控制与乱序重排）
- 保证TCP的可靠性
- 保证TCP的流控特性





